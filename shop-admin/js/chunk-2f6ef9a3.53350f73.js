(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f6ef9a3"],{"26ec":function(t,e,a){"use strict";var n=a("6026"),i=a.n(n);i.a},6026:function(t,e,a){},7779:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-alert",{attrs:{title:"注意:只允许为第三级分类设置相关参数!",type:"warning",closable:!1,"show-icon":""}}),a("div",{staticClass:"select"},[a("div",{staticClass:"desc"},[t._v("选择商品分类:")]),a("div",{staticClass:"cascader"},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:t.selectList,expandTrigger:"hover",props:t.selectProps},on:{change:t.handleChange},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}})],1)]),a("div",{staticClass:"tab"},[a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:0===t.selectValue.length},on:{click:function(e){t.addDialog=!0}}},[t._v("添加参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(n,i){return a("el-tag",{key:n,staticStyle:{"margin-right":"15px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(i,e.row)}}},[t._v(t._s(n))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticStyle:{width:"300px"},attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.addTag(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return t.showMany(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.deleteAttr(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:0===t.selectValue.length},on:{click:function(e){t.addDialog=!0}}},[t._v("添加属性")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(n,i){return a("el-tag",{key:n,staticStyle:{"margin-right":"15px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(i,e.row)}}},[t._v(t._s(n))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticStyle:{width:"300px"},attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.addTag(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return t.showMany(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.deleteAttr(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"修改动态参数",visible:t.updateDialog,width:"30%","show-close":!1},on:{"update:visible":function(e){t.updateDialog=e}}},[a("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:t.editForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"动态参数",prop:"name"}},[a("el-input",{model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancelEidt("editForm")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateAttr("editForm")}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:t.title,visible:t.addDialog,width:"30%","show-close":!1},on:{"update:visible":function(e){t.addDialog=e}}},[a("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:t.addForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"动态参数",prop:"name"}},[a("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancelAdd("addForm")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addAttr("addForm")}}},[t._v("确 定")])],1)],1)],1)},i=[],s=(a("9302"),a("2eeb"),a("ea69"),a("053b"),a("e35a"),a("0d7a"),a("6db4"),a("6a61"),a("9666")),r={data:function(){return{title:"添加动态参数",selectList:[],selectValue:[],selectProps:{value:"cat_id",label:"cat_name",children:"children"},activeName:"many",tableData:[],id:"",sel:"many",updateDialog:!1,editForm:{name:"",id:"",attrId:"",attr_sel:""},rules:{name:[{required:!0,message:"参数名不能为空",trigger:"blur"},{min:2,max:10,message:"参数名在2-10位之间",trigger:"blur"}]},onlyDialog:!1,addDialog:!1,addForm:{name:""}}},components:{},methods:{getCatgory:function(){var t=this;this.$api.getCategory({type:3}).then((function(e){200===e.meta.status&&(t.selectList=e.data)}))},getAttrs:function(){var t=this;this.$api.getAttrs({id:this.id,sel:this.sel}).then((function(e){200===e.meta.status&&(e.data.map((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.inputVisible=!1,t.inputValue=""})),t.tableData=e.data)})).catch((function(t){console.log(t)}))},handleChange:function(){this.id=this.selectValue[2],this.getAttrs()},tabClick:function(t){this.sel=t.name,this.title="添加静态属性",this.getAttrs()},handleClose:function(t,e){var a=this;e.attr_vals.splice(t,1),this.$api.editAttrs({id:this.id,attrId:e.attr_id,attr_name:e.attr_name,attr_sel:this.sel,attr_vals:e.attr_vals.join(" ")}).then((function(t){200===t.meta.status?(a.$message.success(t.meta.msg),a.inputValue="",a.inputVisible=!1):(a.$message.error(t.meta.msg),a.inputVisible=!1)}))},addTag:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){var e=this;""!==t.inputValue.trim()?(t.attr_vals.push(t.inputValue.trim()),t.inputValue="",t.inputVisible=!1,this.$api.editAttrs({id:this.id,attrId:t.attr_id,attr_name:t.attr_name,attr_sel:this.sel,attr_vals:t.attr_vals.join(" ")}).then((function(t){200===t.meta.status?(e.$message.success(t.meta.msg),e.inputValue="",e.inputVisible=!1):(e.$message.error(t.meta.msg),e.inputVisible=!1)}))):this.$message.error("添加内容不能为空")},showMany:function(t){this.editForm.name=t.attr_name,this.editForm.id=t.cat_id,this.editForm.attrId=t.attr_id,this.editForm.attr_sel=t.attr_sel,this.updateDialog=!0},showOnly:function(){this.onlyDialog=!0},cancelEidt:function(t){this.updateDialog=!1,this.$refs[t].resetFields()},updateAttr:function(t){var e=this;this.$api.editAttrs({id:this.editForm.id,attrId:this.editForm.attrId,attr_name:this.editForm.name,attr_sel:this.editForm.attr_sel}).then((function(a){200===a.meta.status?(e.$message.success(a.meta.msg),e.$refs[t].resetFields(),e.getAttrs(),e.updateDialog=!1):(e.$message.error(a.meta.msg),e.$refs[t].resetFields(),e.updateDialog=!1)}))},cancelAdd:function(t){this.addDialog=!1,this.$refs[t].resetFields()},addAttr:function(t){var e=this;this.$api.addAttrs({id:this.id,attr_name:this.addForm.name,attr_sel:this.sel}).then((function(a){201===a.meta.status&&(e.$message.success(a.meta.msg),e.$refs[t].resetFields(),e.getAttrs(),e.addDialog=!1)})).catch((function(a){e.$message.error(res.meta.msg),e.$refs[t].resetFields(),e.addDialog=!1}))},deleteAttr:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(n=a.sent,"confirm"===n){a.next=5;break}return a.abrupt("return",e.$message.info("取消了删除！"));case 5:return a.next=7,e.$api.deleteAttr({id:t.cat_id,attrid:t.attr_id});case 7:i=a.sent,200===i.meta.status?(e.$message.success(i.meta.msg),e.getAttrs()):e.$message.error("删除失败");case 9:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getCatgory()},watch:{},computed:{}},l=r,o=(a("26ec"),a("9ca4")),c=Object(o["a"])(l,n,i,!1,null,"62a07f1a",null);e["default"]=c.exports}}]);